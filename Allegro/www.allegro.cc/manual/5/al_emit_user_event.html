<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink">

<!-- Mirrored from www.allegro.cc/manual/5/al_emit_user_event by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>al_emit_user_event - Allegro 5 Manual</title>
<link rel="stylesheet" type="text/css" media="screen, projection" href="manual.css" /> 
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/prototype.js"></script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/jquery-1.5.1.min.js"></script>
<style type="text/css">
#examples p.names { font-size: 75%; }

.snippet, .terminal {
	font-size: 13px;
	font-family: monospace;
	line-height: 1.2;
	width: 95%;
	white-space: pre;
	overflow: auto;
}

.snippet code {
	font-family: monospace;
	font-size: 13px;
	line-height: 1.2;
	white-space: normal;
}

div.source-code div.inner, pre.source-code, .terminal.scroll {
	background-color: #fff;
	border-bottom: solid #999 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	border-top: solid #ccc 1px;
	font-family: monospace;
	line-height: 1.2;
	white-space: pre;
	max-height: 400px;
	overflow: auto;
}

span.source-code,
.source-code pre {
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
	white-space: pre;
}

div.mockup div.source-code {
	xwidth: 600px;
}

div.mockup div.source-code.snippet div.inner,
div.mockup div.source-code.snippet div.inner td {
	border: none;
	background-color: transparent !important;
}

div.mockup div.source-code div.inner.fullsize {
	max-height: none;
}

div.mockup div.source-code div.toolbar {
	background-color: #eee;
	border-top: solid #ccc 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	font-family: Tahoma, sans-serif;
	font-size: 11px;
	padding: 4px;
}

div.mockup div.source-code div.toolbar span.name {
	font-weight: bold;
	margin-right: 16px;
}

div.mockup div.source-code div.toolbar span.button {
	border: solid #eee 1px;
	cursor: pointer;
	padding: 1px 4px;
	margin-right: 2px;
}

div.mockup div.source-code div.toolbar span.button.enabled {
	background-color: #ddd;
	border-top: solid #fff 1px;
	border-left: solid #fff 1px;
	border-right: solid #999 1px;
	border-bottom: solid #999 1px;
}

div.mockup div.source-code div.highlight {
	background-color: #ffa !important;
}

div.mockup div.source-code span.number {
	background-color: #eee !important;
	border-right: #999 solid 1px !important;
	text-align: right;
	padding: 0 0.5em;
	margin: 0 1em 0 0;
	width: 40px;
}

div.mockup div.source-code div.highlight span.number {
	background-color: #ccc !important;
	font-weight: bold;
}

div.mockup div.source-code div.inner {
	margin: 0;
	padding: 0;
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
}

</style>
<script type="text/javascript">
var $j = $.noConflict();
var codecache = {};
$j(function()
{
  $j("#examples a").click(function()
  {
    var ex = $j(this).html();
    if (codecache[ex])
      show_code(codecache[ex]);
    else
      $j.getJSON('/dhtml/get-example.rpc/' + ex, function(json)
      {
        codecache[ex] = json;
        show_code(json);
      });
  });
});

function show_code(code)
{
  $j("#example-code").html($j('<input type="button" value="Hide" style="margin-bottom: 8px;" />').click(function()
  {
    $j(this).closest('div').hide();
  })).append(code).show();
  attachGlobalEvents($("examples"));
};
</script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/general.js"></script>

</head>
<body>
<div id="sidebar">
<p class="site"><a href="https://www.allegro.cc/">allegro.cc</a></p>
<h1><a href="index.html">Manual</a></h1>
<h2><a href="events.html">Event system and events</a></h2>
		<ul><li><a href="allegro_event-2.html">ALLEGRO_EVENT</a><ul><li><a href="https://www.allegro.cc/manual/5/allegro_event_joystick_axis">ALLEGRO_EVENT_JOYSTICK_AXIS</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_joystick_button_down">ALLEGRO_EVENT_JOYSTICK_BUTTON_DOWN</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_joystick_button_up">ALLEGRO_EVENT_JOYSTICK_BUTTON_UP</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_joystick_configuration">ALLEGRO_EVENT_JOYSTICK_CONFIGURATION</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_key_down">ALLEGRO_EVENT_KEY_DOWN</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_key_up">ALLEGRO_EVENT_KEY_UP</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_key_char">ALLEGRO_EVENT_KEY_CHAR</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_axes">ALLEGRO_EVENT_MOUSE_AXES</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_button_down">ALLEGRO_EVENT_MOUSE_BUTTON_DOWN</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_button_up">ALLEGRO_EVENT_MOUSE_BUTTON_UP</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_warped">ALLEGRO_EVENT_MOUSE_WARPED</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_enter_display">ALLEGRO_EVENT_MOUSE_ENTER_DISPLAY</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_mouse_leave_display">ALLEGRO_EVENT_MOUSE_LEAVE_DISPLAY</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_timer">ALLEGRO_EVENT_TIMER</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_expose">ALLEGRO_EVENT_DISPLAY_EXPOSE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_resize">ALLEGRO_EVENT_DISPLAY_RESIZE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_close">ALLEGRO_EVENT_DISPLAY_CLOSE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_lost">ALLEGRO_EVENT_DISPLAY_LOST</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_found">ALLEGRO_EVENT_DISPLAY_FOUND</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_switch_out">ALLEGRO_EVENT_DISPLAY_SWITCH_OUT</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_switch_in">ALLEGRO_EVENT_DISPLAY_SWITCH_IN</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_display_orientation">ALLEGRO_EVENT_DISPLAY_ORIENTATION</a></li></ul></li><li><a href="https://www.allegro.cc/manual/5/allegro_user_event">ALLEGRO_USER_EVENT</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_queue">ALLEGRO_EVENT_QUEUE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_source">ALLEGRO_EVENT_SOURCE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_type">ALLEGRO_EVENT_TYPE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_get_event_type">ALLEGRO_GET_EVENT_TYPE</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_event_type_is_user">ALLEGRO_EVENT_TYPE_IS_USER</a></li><li><a href="al_create_event_queue.html">al_create_event_queue</a></li><li><a href="al_destroy_event_queue.html">al_destroy_event_queue</a></li><li><a href="al_register_event_source.html">al_register_event_source</a></li><li><a href="al_unregister_event_source.html">al_unregister_event_source</a></li><li><a href="al_is_event_queue_empty.html">al_is_event_queue_empty</a></li><li><a href="al_get_next_event.html">al_get_next_event</a></li><li><a href="al_peek_next_event.html">al_peek_next_event</a></li><li><a href="al_drop_next_event.html">al_drop_next_event</a></li><li><a href="al_flush_event_queue.html">al_flush_event_queue</a></li><li><a href="al_wait_for_event.html">al_wait_for_event</a></li><li><a href="al_wait_for_event_timed.html">al_wait_for_event_timed</a></li><li><a href="al_wait_for_event_until.html">al_wait_for_event_until</a></li><li><a href="al_init_user_event_source.html">al_init_user_event_source</a></li><li><a href="al_destroy_user_event_source.html">al_destroy_user_event_source</a></li><li><a href="al_emit_user_event.html">al_emit_user_event</a></li><li><a href="al_unref_user_event.html">al_unref_user_event</a></li><li><a href="al_get_event_source_data.html">al_get_event_source_data</a></li><li><a href="al_set_event_source_data.html">al_set_event_source_data</a></li></ul></div>
<div id="content">
<h1 class="title">al_emit_user_event</h1>
<code><pre><span class="k1">bool</span> <a href="https://www.allegro.cc/manual/al_emit_user_event"><span class="a">al_emit_user_event</span></a><span class="k2">(</span><a href="https://www.allegro.cc/manual/ALLEGRO_EVENT_SOURCE"><span class="a">ALLEGRO_EVENT_SOURCE</span></a> <span class="k3">*</span>src,
   <a href="https://www.allegro.cc/manual/ALLEGRO_EVENT"><span class="a">ALLEGRO_EVENT</span></a> <span class="k3">*</span>event, <span class="k1">void</span> <span class="k2">(</span><span class="k3">*</span>dtor<span class="k2">)</span><span class="k2">(</span><a href="https://www.allegro.cc/manual/ALLEGRO_USER_EVENT"><span class="a">ALLEGRO_USER_EVENT</span></a> <span class="k3">*</span><span class="k2">)</span><span class="k2">)</span></pre></code>
<small>Introduced in <b>5.0.0</b></small>


<p>Emit a user event. The event source must have been initialised with <a href="al_init_user_event_source.html">al_init_user_event_source</a>. Returns <code>false</code> if the event source isn't registered with any queues, hence the event wouldn't have been delivered into any queues.</p><p>Events are <em>copied</em> in and out of event queues, so after this function returns the memory pointed to by <code>event</code> may be freed or reused. Some fields of the event being passed in may be modified by the function.</p><p>Reference counting will be performed if <code>dtor</code> is not NULL. Whenever a copy of the event is made, the reference count increases. You need to call <a href="al_unref_user_event.html">al_unref_user_event</a> to decrease the reference count once you are done a user event that you have received from <a href="al_get_next_event.html">al_get_next_event</a>, <a href="al_peek_next_event.html">al_peek_next_event</a>, <a href="al_wait_for_event.html">al_wait_for_event</a>, etc.</p><p>Once the reference count drops to zero <code>dtor</code> will be called with a copy of the event as an argument. It should free the resources associated with the event, but <em>not</em> the event itself (since it is just a copy).</p><p>If <code>dtor</code> is NULL then reference counting will not be performed. It is safe, but unnecessary, to call <a href="al_unref_user_event.html">al_unref_user_event</a> on non-reference counted user events.</p><p>See also: <a href="https://www.allegro.cc/manual/5/allegro_user_event">ALLEGRO_USER_EVENT</a>, <a href="al_unref_user_event.html">al_unref_user_event</a></p>
<div id="examples">
<p class="names">Examples: <a href="#" onclick="return false;">ex_native_filechooser</a>, <a href="#" onclick="return false;">ex_user_events</a></p>

<div id="example-code" style="display: none">
</div>

</div>

<hr />

<p><i>Most helpful discussions:</i></p>


<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/607803">User Events?</a>
		(2)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/610594">[a5] simulate keystroke?</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618670">ALLEGRO_EVENT_DISPLAY_SWITCH_OUT</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618566">How to handle game state changes?</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618044">A segfault for libmpv</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617442">Synchronizing Threads</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617265">I do not quite understand the custom events mentioned in the user manual</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/616732">Redrawing smoothly while display is being resized</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615891">Passing by reference in custom event</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615781">Allegro 5.1.12 released!</a>
					</li>
</ul>

<p><i>Other recent discussions:</i></p>
<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615881">al_emit_user_event() thread safe?</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615737">   ASSERT(ALLEGRO_EVENT_TYPE_IS_USER(event-&amp;gt;any.type));</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615266">Random deadlocks playing WAV sounds (Windows, MSVC)</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615220">Joystick Event Injection</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/614032">[A5] Event and socket messages ?</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613705">Listeners, threads, synchronization</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613372">Crash in d3d_shutdown</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613326">Intro to threading and cpu free waiting for signals</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/612755">[A5] User Event are giving me a hard time. </a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/612074">[A5] simulate_keypress()?</a>
					</li>
</ul>



</div>



</body>

<!-- Mirrored from www.allegro.cc/manual/5/al_emit_user_event by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
</html>
