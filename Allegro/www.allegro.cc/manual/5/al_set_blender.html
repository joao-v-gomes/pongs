<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink">

<!-- Mirrored from www.allegro.cc/manual/5/al_set_blender by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>al_set_blender - Allegro 5 Manual</title>
<link rel="stylesheet" type="text/css" media="screen, projection" href="manual.css" /> 
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/prototype.js"></script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/jquery-1.5.1.min.js"></script>
<style type="text/css">
#examples p.names { font-size: 75%; }

.snippet, .terminal {
	font-size: 13px;
	font-family: monospace;
	line-height: 1.2;
	width: 95%;
	white-space: pre;
	overflow: auto;
}

.snippet code {
	font-family: monospace;
	font-size: 13px;
	line-height: 1.2;
	white-space: normal;
}

div.source-code div.inner, pre.source-code, .terminal.scroll {
	background-color: #fff;
	border-bottom: solid #999 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	border-top: solid #ccc 1px;
	font-family: monospace;
	line-height: 1.2;
	white-space: pre;
	max-height: 400px;
	overflow: auto;
}

span.source-code,
.source-code pre {
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
	white-space: pre;
}

div.mockup div.source-code {
	xwidth: 600px;
}

div.mockup div.source-code.snippet div.inner,
div.mockup div.source-code.snippet div.inner td {
	border: none;
	background-color: transparent !important;
}

div.mockup div.source-code div.inner.fullsize {
	max-height: none;
}

div.mockup div.source-code div.toolbar {
	background-color: #eee;
	border-top: solid #ccc 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	font-family: Tahoma, sans-serif;
	font-size: 11px;
	padding: 4px;
}

div.mockup div.source-code div.toolbar span.name {
	font-weight: bold;
	margin-right: 16px;
}

div.mockup div.source-code div.toolbar span.button {
	border: solid #eee 1px;
	cursor: pointer;
	padding: 1px 4px;
	margin-right: 2px;
}

div.mockup div.source-code div.toolbar span.button.enabled {
	background-color: #ddd;
	border-top: solid #fff 1px;
	border-left: solid #fff 1px;
	border-right: solid #999 1px;
	border-bottom: solid #999 1px;
}

div.mockup div.source-code div.highlight {
	background-color: #ffa !important;
}

div.mockup div.source-code span.number {
	background-color: #eee !important;
	border-right: #999 solid 1px !important;
	text-align: right;
	padding: 0 0.5em;
	margin: 0 1em 0 0;
	width: 40px;
}

div.mockup div.source-code div.highlight span.number {
	background-color: #ccc !important;
	font-weight: bold;
}

div.mockup div.source-code div.inner {
	margin: 0;
	padding: 0;
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
}

</style>
<script type="text/javascript">
var $j = $.noConflict();
var codecache = {};
$j(function()
{
  $j("#examples a").click(function()
  {
    var ex = $j(this).html();
    if (codecache[ex])
      show_code(codecache[ex]);
    else
      $j.getJSON('/dhtml/get-example.rpc/' + ex, function(json)
      {
        codecache[ex] = json;
        show_code(json);
      });
  });
});

function show_code(code)
{
  $j("#example-code").html($j('<input type="button" value="Hide" style="margin-bottom: 8px;" />').click(function()
  {
    $j(this).closest('div').hide();
  })).append(code).show();
  attachGlobalEvents($("examples"));
};
</script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/general.js"></script>

</head>
<body>
<div id="sidebar">
<p class="site"><a href="https://www.allegro.cc/">allegro.cc</a></p>
<h1><a href="index.html">Manual</a></h1>
<h2><a href="graphics.html">Graphics routines</a></h2>
		<ul><li><span>Colors</span><ul><li><a href="allegro_color-2.html">ALLEGRO_COLOR</a></li><li><a href="al_map_rgb.html">al_map_rgb</a></li><li><a href="al_map_rgb_f.html">al_map_rgb_f</a></li><li><a href="al_map_rgba.html">al_map_rgba</a></li><li><a href="al_map_rgba_f.html">al_map_rgba_f</a></li><li><a href="al_unmap_rgb.html">al_unmap_rgb</a></li><li><a href="al_unmap_rgb_f.html">al_unmap_rgb_f</a></li><li><a href="al_unmap_rgba.html">al_unmap_rgba</a></li><li><a href="al_unmap_rgba_f.html">al_unmap_rgba_f</a></li></ul></li><li><span>Locking and pixel formats</span><ul><li><a href="https://www.allegro.cc/manual/5/allegro_locked_region">ALLEGRO_LOCKED_REGION</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_pixel_format">ALLEGRO_PIXEL_FORMAT</a></li><li><a href="al_get_pixel_size.html">al_get_pixel_size</a></li><li><a href="al_get_pixel_format_bits.html">al_get_pixel_format_bits</a></li><li><a href="al_lock_bitmap.html">al_lock_bitmap</a></li><li><a href="al_lock_bitmap_region.html">al_lock_bitmap_region</a></li><li><a href="al_unlock_bitmap.html">al_unlock_bitmap</a></li></ul></li><li><span>Bitmap creation</span><ul><li><a href="allegro_bitmap-2.html">ALLEGRO_BITMAP</a></li><li><a href="al_create_bitmap.html">al_create_bitmap</a></li><li><a href="al_create_sub_bitmap.html">al_create_sub_bitmap</a></li><li><a href="al_clone_bitmap.html">al_clone_bitmap</a></li><li><a href="al_destroy_bitmap.html">al_destroy_bitmap</a></li><li><a href="al_get_new_bitmap_flags.html">al_get_new_bitmap_flags</a></li><li><a href="al_get_new_bitmap_format.html">al_get_new_bitmap_format</a></li><li><a href="al_set_new_bitmap_flags.html">al_set_new_bitmap_flags</a></li><li><a href="al_add_new_bitmap_flag.html">al_add_new_bitmap_flag</a></li><li><a href="al_set_new_bitmap_format.html">al_set_new_bitmap_format</a></li></ul></li><li><span>Bitmap properties</span><ul><li><a href="al_get_bitmap_flags.html">al_get_bitmap_flags</a></li><li><a href="al_get_bitmap_format.html">al_get_bitmap_format</a></li><li><a href="al_get_bitmap_height.html">al_get_bitmap_height</a></li><li><a href="al_get_bitmap_width.html">al_get_bitmap_width</a></li><li><a href="al_get_pixel.html">al_get_pixel</a></li><li><a href="al_is_bitmap_locked.html">al_is_bitmap_locked</a></li><li><a href="al_is_compatible_bitmap.html">al_is_compatible_bitmap</a></li><li><a href="al_is_sub_bitmap.html">al_is_sub_bitmap</a></li></ul></li><li><span>Drawing operations</span><ul><li><a href="al_clear_to_color.html">al_clear_to_color</a></li><li><a href="al_draw_bitmap.html">al_draw_bitmap</a></li><li><a href="al_draw_tinted_bitmap.html">al_draw_tinted_bitmap</a></li><li><a href="al_draw_bitmap_region.html">al_draw_bitmap_region</a></li><li><a href="al_draw_tinted_bitmap_region.html">al_draw_tinted_bitmap_region</a></li><li><a href="al_draw_pixel.html">al_draw_pixel</a></li><li><a href="al_draw_rotated_bitmap.html">al_draw_rotated_bitmap</a></li><li><a href="al_draw_tinted_rotated_bitmap.html">al_draw_tinted_rotated_bitmap</a></li><li><a href="al_draw_scaled_rotated_bitmap.html">al_draw_scaled_rotated_bitmap</a></li><li><a href="al_draw_tinted_scaled_rotated_bitmap.html">al_draw_tinted_scaled_rotated_bitmap</a></li><li><a href="al_draw_scaled_bitmap.html">al_draw_scaled_bitmap</a></li><li><a href="al_draw_tinted_scaled_bitmap.html">al_draw_tinted_scaled_bitmap</a></li><li><a href="al_get_target_bitmap.html">al_get_target_bitmap</a></li><li><a href="al_put_pixel.html">al_put_pixel</a></li><li><a href="al_put_blended_pixel.html">al_put_blended_pixel</a></li><li><a href="al_set_target_bitmap.html">al_set_target_bitmap</a></li><li><a href="al_set_target_backbuffer.html">al_set_target_backbuffer</a></li><li><a href="al_get_current_display.html">al_get_current_display</a></li></ul></li><li><span>Blending modes</span><ul><li><a href="al_get_blender.html">al_get_blender</a></li><li><a href="al_get_separate_blender.html">al_get_separate_blender</a></li><li><a href="al_set_blender.html">al_set_blender</a></li><li><a href="al_set_separate_blender.html">al_set_separate_blender</a></li></ul></li><li><span>Clipping</span><ul><li><a href="al_get_clipping_rectangle.html">al_get_clipping_rectangle</a></li><li><a href="al_set_clipping_rectangle.html">al_set_clipping_rectangle</a></li></ul></li><li><span>Graphics utility functions</span><ul><li><a href="al_convert_mask_to_alpha.html">al_convert_mask_to_alpha</a></li></ul></li><li><span>Deferred drawing</span><ul><li><a href="al_hold_bitmap_drawing.html">al_hold_bitmap_drawing</a></li><li><a href="al_is_bitmap_drawing_held.html">al_is_bitmap_drawing_held</a></li></ul></li><li><span>Image I/O</span><ul><li><a href="al_register_bitmap_loader.html">al_register_bitmap_loader</a></li><li><a href="al_register_bitmap_saver.html">al_register_bitmap_saver</a></li><li><a href="al_register_bitmap_loader_f.html">al_register_bitmap_loader_f</a></li><li><a href="al_register_bitmap_saver_f.html">al_register_bitmap_saver_f</a></li><li><a href="al_load_bitmap.html">al_load_bitmap</a></li><li><a href="al_load_bitmap_f.html">al_load_bitmap_f</a></li><li><a href="al_save_bitmap.html">al_save_bitmap</a></li><li><a href="al_save_bitmap_f.html">al_save_bitmap_f</a></li></ul></li></ul></div>
<div id="content">
<h1 class="title">al_set_blender</h1>
<code><pre><span class="k1">void</span> <a href="https://www.allegro.cc/manual/al_set_blender"><span class="a">al_set_blender</span></a><span class="k2">(</span><span class="k1">int</span> op, <span class="k1">int</span> src, <span class="k1">int</span> dst<span class="k2">)</span></pre></code>
<small>Introduced in <b>5.0.0</b></small>


<p>Sets the function to use for blending for the current thread.</p><p>Blending means, the source and destination colors are combined in drawing operations.</p><p>Assume the source color (e.g. color of a rectangle to draw, or pixel of a bitmap to draw) is given as its red/green/blue/alpha components (if the bitmap has no alpha it always is assumed to be fully opaque, so 255 for 8-bit or 1.0 for floating point): <em>sr, sg, sb, sa</em>. And this color is drawn to a destination, which already has a color: <em>dr, dg, db, da</em>.</p><p>The conceptional formula used by Allegro to draw any pixel then depends on the <code>op</code> parameter:</p><ul><li><p>ALLEGRO_ADD</p><pre><code> r <span class="k3">=</span> dr <span class="k3">*</span> dst <span class="k3">+</span> sr <span class="k3">*</span> src
 g <span class="k3">=</span> dg <span class="k3">*</span> dst <span class="k3">+</span> sg <span class="k3">*</span> src
 b <span class="k3">=</span> db <span class="k3">*</span> dst <span class="k3">+</span> sb <span class="k3">*</span> src
 a <span class="k3">=</span> da <span class="k3">*</span> dst <span class="k3">+</span> sa <span class="k3">*</span> src</code></pre></li><li><p>ALLEGRO_DEST_MINUS_SRC</p><pre><code> r <span class="k3">=</span> dr <span class="k3">*</span> dst <span class="k3">-</span> sr <span class="k3">*</span> src
 g <span class="k3">=</span> dg <span class="k3">*</span> dst <span class="k3">-</span> sg <span class="k3">*</span> src
 b <span class="k3">=</span> db <span class="k3">*</span> dst <span class="k3">-</span> sb <span class="k3">*</span> src
 a <span class="k3">=</span> da <span class="k3">*</span> dst <span class="k3">-</span> sa <span class="k3">*</span> src</code></pre></li><li><p>ALLEGRO_SRC_MINUS_DEST</p><pre><code> r <span class="k3">=</span> sr <span class="k3">*</span> src <span class="k3">-</span> dr <span class="k3">*</span> dst
 g <span class="k3">=</span> sg <span class="k3">*</span> src <span class="k3">-</span> dg <span class="k3">*</span> dst
 b <span class="k3">=</span> sb <span class="k3">*</span> src <span class="k3">-</span> db <span class="k3">*</span> dst
 a <span class="k3">=</span> sa <span class="k3">*</span> src <span class="k3">-</span> da <span class="k3">*</span> dst</code></pre></li></ul><p>Valid values for <code>src</code> and <code>dst</code> passed to this function are</p><ul><li><p>ALLEGRO_ZERO</p><pre><code> src <span class="k3">=</span> <span class="n">0</span>
 dst <span class="k3">=</span> <span class="n">0</span></code></pre></li><li><p>ALLEGRO_ONE</p><pre><code> src <span class="k3">=</span> <span class="n">1</span>
 dst <span class="k3">=</span> <span class="n">1</span></code></pre></li><li><p>ALLEGRO_ALPHA</p><pre><code> src <span class="k3">=</span> sa
 dst <span class="k3">=</span> sa</code></pre></li><li><p>ALLEGRO_INVERSE_ALPHA</p><pre><code> src <span class="k3">=</span> <span class="n">1</span> <span class="k3">-</span> sa
 dst <span class="k3">=</span> <span class="n">1</span> <span class="k3">-</span> sa</code></pre></li></ul><p>Blending examples:</p><p>So for example, to restore the default of using premultiplied alpha blending, you would use (pseudo code)</p><pre><code><a href="https://www.allegro.cc/manual/al_set_blender"><span class="a">al_set_blender</span></a><span class="k2">(</span>ALLEGRO_ADD, ALLEGRO_ONE, ALLEGRO_INVERSE_ALPHA<span class="k2">)</span></code></pre><p>If you are using non-pre-multiplied alpha, you could use</p><pre><code><a href="https://www.allegro.cc/manual/al_set_blender"><span class="a">al_set_blender</span></a><span class="k2">(</span>ALLEGRO_ADD, ALLEGRO_ALPHA, ALLEGRO_INVERSE_ALPHA<span class="k2">)</span></code></pre><p>Additive blending would be achieved with</p><pre><code><a href="https://www.allegro.cc/manual/al_set_blender"><span class="a">al_set_blender</span></a><span class="k2">(</span>ALLEGRO_ADD, ALLEGRO_ONE, ALLEGRO_ONE<span class="k2">)</span></code></pre><p>Copying the source to the destination (including alpha) unmodified</p><pre><code><a href="https://www.allegro.cc/manual/al_set_blender"><span class="a">al_set_blender</span></a><span class="k2">(</span>ALLEGRO_ADD, ALLEGRO_ONE, ALLEGRO_ZERO<span class="k2">)</span></code></pre><p>See also: <a href="al_set_separate_blender.html">al_set_separate_blender</a>, <a href="al_get_blender.html">al_get_blender</a></p>
<div id="examples">
<p class="names">Examples: <a href="#" onclick="return false;">ex_bitmap_flip</a>, <a href="#" onclick="return false;">ex_bitmap_target</a>, <a href="#" onclick="return false;">ex_blend</a>, <a href="#" onclick="return false;">ex_blend2</a>, <a href="#" onclick="return false;">ex_blend_bench</a>, <a href="#" onclick="return false;">ex_blend_test</a>, <a href="#" onclick="return false;">ex_blit</a>, <a href="#" onclick="return false;">ex_clip</a>, <a href="#" onclick="return false;">ex_display_options</a>, <a href="#" onclick="return false;">ex_draw</a>, <a href="#" onclick="return false;">ex_draw_bitmap</a>, <a href="#" onclick="return false;">ex_expose</a>, <a href="#" onclick="return false;">ex_haiku</a>, <a href="#" onclick="return false;">ex_lines</a>, <a href="#" onclick="return false;">ex_logo</a>, <a href="#" onclick="return false;">ex_membmp</a>, <a href="#" onclick="return false;">ex_mixer_pp</a>, <a href="#" onclick="return false;">ex_mouse_cursor</a>, <a href="#" onclick="return false;">ex_mouse_events</a>, <a href="#" onclick="return false;">ex_native_filechooser</a>, <a href="#" onclick="return false;">ex_pixelformat</a>, <a href="#" onclick="return false;">ex_premulalpha</a>, <a href="#" onclick="return false;">ex_prim</a>, <a href="#" onclick="return false;">ex_rotate</a>, <a href="#" onclick="return false;">ex_scale</a>, <a href="#" onclick="return false;">ex_stream_seek</a>, <a href="#" onclick="return false;">ex_threads</a>, <a href="#" onclick="return false;">ex_threads2</a>, <a href="#" onclick="return false;">ex_transform</a>, <a href="#" onclick="return false;">ex_windows</a></p>

<div id="example-code" style="display: none">
</div>

</div>

<hr />

<p><i>Most helpful discussions:</i></p>


<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617482">Day and Night Cycles</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615420">[Allegro 5.0.10] Lightning with blenders</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613960">[A5] Blender</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613635">A5 - printing text to memory bitmap</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/612797">Is it possible to acheive &amp;quot;screen&amp;quot; blending with al_set_blender()?</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/612304">al_set_blender and al_draw_tinted_bitmap</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/608175">Blending issues </a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/606101">[a5 rc4] anomalous blending</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618645">using a photo to floofill a bitmap</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618572">tranformations with A5</a>
					</li>
</ul>

<p><i>Other recent discussions:</i></p>
<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617979">Krampushack 2019?</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618000">Tinting/blending difference/explained</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617799">Speed of clearing a working area on a bitmap</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617749">git format-patch: troubles with white space trailing</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617642">Blending mode for additive lighting</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617493">Shader Puzzle aka Reverse Engineering cool effect</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617480">Mixing bitmaps</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617346">Help with blender and alpha masking</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617328">Question about ALLEGRO_FULLSCREEN_WINDOW</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617235">Color Condundrum</a>
					</li>
</ul>



</div>



</body>

<!-- Mirrored from www.allegro.cc/manual/5/al_set_blender by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
</html>
