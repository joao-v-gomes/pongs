<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink">
<!-- Mirrored from www.allegro.cc/manual/5/transformations.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:19:22 GMT -->
<head><title>Transformations - Allegro 5 Manual</title><link rel="stylesheet" type="text/css" media="screen, projection" href="manual.css"/></head><body>
<div id="sidebar"><p class="site"><a href="https://www.allegro.cc/">allegro.cc</a></p><h1><a href="index.html">Manual</a></h1><div><ul><li><a href="index.html"><strong>Contents</strong></a></li><li><a href="config.html">Configuration files</a></li><li><a href="display.html">Display</a></li><li><a href="events.html">Events</a></li><li><a href="file.html">File I/O</a></li><li><a href="fshook.html">Filesystem</a></li><li><a href="fixed.html">Fixed point math</a></li><li><a href="graphics.html">Graphics</a></li><li><a href="joystick.html">Joystick</a></li><li><a href="keyboard.html">Keyboard</a></li><li><a href="memory.html">Memory</a></li><li><a href="mouse.html">Mouse</a></li><li><a href="path.html">Path</a></li><li><a href="state.html">State</a></li><li><a href="system.html">System</a></li><li><a href="threads.html">Threads</a></li><li><a href="time.html">Time</a></li><li><a href="timer.html">Timer</a></li><li><a href="transformations.html">Transformations</a></li><li><a href="utf8.html">UTF-8</a></li><li><a href="misc.html">Miscellaneous</a></li><li><a href="platform.html">Platform-specific</a></li><li><a href="direct3d.html">Direct3D</a></li><li><a href="opengl.html">OpenGL</a></li></ul></div>
<div><ul><li><a href="index.html#addons"><strong>Addons</strong></a></li><li><a href="audio.html">Audio addon</a></li><li><a href="acodec.html">Audio codecs</a></li><li><a href="color.html">Color addon</a></li><li><a href="font.html">Font addons</a></li><li><a href="image.html">Image I/O addon</a></li><li><a href="memfile.html">Memfile addon</a></li><li><a href="native_dialog.html">Native dialogs addon</a></li><li><a href="physfs.html">PhysicsFS addon</a></li><li><a href="primitives.html">Primitives addon</a></li></ul></div></div><div id="content"><h1 class="title">Transformations</h1><p>These functions are declared in the main Allegro header file:</p><pre><code><span class="p">#include &lt;allegro5/allegro.h&gt;</span></code></pre><p>The transformations are combined in the order of the function invocations. Thus to create a transformation that first rotates a point and then translates it, you would (starting with an identity transformation) call <a href="al_rotate_transform.html">al_rotate_transform</a> and then <a href="al_translate_transform.html">al_translate_transform</a>. This approach is opposite of what OpenGL uses but similar to what Direct3D uses.</p><p>For those who known the matrix algebra going behind the scenes, what the transformation functions in Allegro do is "pre-multiply" the successive transformations. So, for example, if you have code that does:</p><pre><code><a href="https://www.allegro.cc/manual/al_identity_transform"><span class="a">al_identity_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T<span class="k2">)</span><span class="k2">;</span>

<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T1<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T2<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T3<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T4<span class="k2">)</span><span class="k2">;</span></code></pre><p>The resultant matrix multiplication expression will look like this:</p><pre><code>T4 <span class="k3">*</span> T3 <span class="k3">*</span> T2 <span class="k3">*</span> T1</code></pre><p>Since the point coordinate vector term will go on the right of that sequency of factors, the transformation that is called first, will also be applied first.</p><p>This means if you have code like this:</p><pre><code><a href="https://www.allegro.cc/manual/al_identity_transform"><span class="a">al_identity_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T1<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_scale_transform"><span class="a">al_scale_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T1, <span class="n">2</span>, <span class="n">2</span><span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_identity_transform"><span class="a">al_identity_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T2<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_translate_transform"><span class="a">al_translate_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T2, <span class="n">100</span>, <span class="n">0</span><span class="k2">)</span><span class="k2">;</span>

<a href="https://www.allegro.cc/manual/al_identity_transform"><span class="a">al_identity_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T<span class="k2">)</span><span class="k2">;</span>

<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T1<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_compose_transform"><span class="a">al_compose_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="k3">&amp;</span>T2<span class="k2">)</span><span class="k2">;</span>

<a href="https://www.allegro.cc/manual/al_use_transform"><span class="a">al_use_transform</span></a><span class="k2">(</span>T<span class="k2">)</span><span class="k2">;</span></code></pre><p>it does exactly the same as:</p><pre><code><a href="https://www.allegro.cc/manual/al_identity_transform"><span class="a">al_identity_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_scale_transform"><span class="a">al_scale_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="n">2</span>, <span class="n">2</span><span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_translate_transform"><span class="a">al_translate_transform</span></a><span class="k2">(</span><span class="k3">&amp;</span>T, <span class="n">100</span>, <span class="n">0</span><span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_use_transform"><span class="a">al_use_transform</span></a><span class="k2">(</span>T<span class="k2">)</span><span class="k2">;</span></code></pre><ul><li><a href="ALLEGRO_TRANSFORM.html">ALLEGRO_TRANSFORM</a></li><li><a href="al_copy_transform.html">al_copy_transform</a></li><li><a href="al_use_transform.html">al_use_transform</a></li><li><a href="al_get_current_transform.html">al_get_current_transform</a></li><li><a href="al_invert_transform.html">al_invert_transform</a></li><li><a href="al_check_inverse.html">al_check_inverse</a></li><li><a href="al_identity_transform.html">al_identity_transform</a></li><li><a href="al_build_transform.html">al_build_transform</a></li><li><a href="al_translate_transform.html">al_translate_transform</a></li><li><a href="al_rotate_transform.html">al_rotate_transform</a></li><li><a href="al_scale_transform.html">al_scale_transform</a></li><li><a href="al_transform_coordinates.html">al_transform_coordinates</a></li><li><a href="al_compose_transform.html">al_compose_transform</a></li></ul></div>
</body>
<!-- Mirrored from www.allegro.cc/manual/5/transformations.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:19:41 GMT -->
</html>