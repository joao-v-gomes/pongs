<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink">
<!-- Mirrored from www.allegro.cc/manual/5/utf8.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:19:41 GMT -->
<head><title>UTF-8 string routines - Allegro 5 Manual</title><link rel="stylesheet" type="text/css" media="screen, projection" href="manual.css"/></head><body>
<div id="sidebar"><p class="site"><a href="https://www.allegro.cc/">allegro.cc</a></p><h1><a href="index.html">Manual</a></h1><div><ul><li><a href="index.html"><strong>Contents</strong></a></li><li><a href="config.html">Configuration files</a></li><li><a href="display.html">Display</a></li><li><a href="events.html">Events</a></li><li><a href="file.html">File I/O</a></li><li><a href="fshook.html">Filesystem</a></li><li><a href="fixed.html">Fixed point math</a></li><li><a href="graphics.html">Graphics</a></li><li><a href="joystick.html">Joystick</a></li><li><a href="keyboard.html">Keyboard</a></li><li><a href="memory.html">Memory</a></li><li><a href="mouse.html">Mouse</a></li><li><a href="path.html">Path</a></li><li><a href="state.html">State</a></li><li><a href="system.html">System</a></li><li><a href="threads.html">Threads</a></li><li><a href="time.html">Time</a></li><li><a href="timer.html">Timer</a></li><li><a href="transformations.html">Transformations</a></li><li><a href="utf8.html">UTF-8</a></li><li><a href="misc.html">Miscellaneous</a></li><li><a href="platform.html">Platform-specific</a></li><li><a href="direct3d.html">Direct3D</a></li><li><a href="opengl.html">OpenGL</a></li></ul></div>
<div><ul><li><a href="index.html#addons"><strong>Addons</strong></a></li><li><a href="audio.html">Audio addon</a></li><li><a href="acodec.html">Audio codecs</a></li><li><a href="color.html">Color addon</a></li><li><a href="font.html">Font addons</a></li><li><a href="image.html">Image I/O addon</a></li><li><a href="memfile.html">Memfile addon</a></li><li><a href="native_dialog.html">Native dialogs addon</a></li><li><a href="physfs.html">PhysicsFS addon</a></li><li><a href="primitives.html">Primitives addon</a></li></ul></div></div><div id="content"><h1 class="title">UTF-8 string routines</h1><p>These functions are declared in the main Allegro header file:</p><pre><code><span class="p">#include &lt;allegro5/allegro.h&gt;</span></code></pre><div id="about-utf-8-string-routines"><h1><span>About UTF-8 string routines</span></h1><p>Some parts of the Allegro API, such as the font rountines, expect Unicode strings encoded in UTF-8. These basic routines are provided to help you work with UTF-8 strings. You should use another library (e.g. ICU) if you require more functionality.</p><p>You should also see elsewhere for an introduction to Unicode. Extremely briefly, Unicode is a standard consisting of a large character set (of over 100,000 characters), and rules, such as how to sort strings. A <em>code point</em> is the integer value of a character, but not all code points are characters, as some code points have other uses. Clearly it is impossible represent each code point with a 8-bit byte or even a 16-bit integer, so there exist different Unicode Transformation Formats. UTF-8 has many nice properties, but the main advantages are that it is backwards compatible with C strings, and ASCII characters (code points &lt;= 127) are encoded in UTF-8 exactly as they would be in ASCII.</p><p>Here is a diagram of the representation of the word "ål", with a NUL terminator.</p><pre><code>                   <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span>
           String         å                l              NUL
                   <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span>
      Code points    U<span class="k3">+</span><span class="n">00E5</span> <span class="k2">(</span><span class="n">229</span><span class="k2">)</span>     U<span class="k3">+</span><span class="n">006C</span> <span class="k2">(</span><span class="n">108</span><span class="k2">)</span>     U<span class="k3">+</span><span class="n">0000</span> <span class="k2">(</span><span class="n">0</span><span class="k2">)</span>
                   <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span>
   UTF-8 encoding     <span class="n">0xC3</span>, <span class="n">0xA5</span>          <span class="n">0x6C</span>            <span class="n">0x00</span>
                   <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span>
UTF-16LE encoding     <span class="n">0xE5</span>, <span class="n">0x00</span>       <span class="n">0x6C</span>, <span class="n">0x00</span>      <span class="n">0x00</span>, <span class="n">0x00</span>
                   <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span> <span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span><span class="k3">-</span></code></pre><p>U+00E5 is greater than 127 so requires two bytes to represent in UTF-8. U+006C and U+0000 both exist in the ASCII range, so take one byte each, exactly as in an ASCII string. UTF-16 is a different encoding, in which each code is represented by two or four bytes. In UTF-8 a zero byte is only present when it represents the NUL character, but this is not true for UTF-16.</p><p>In the Allegro API, be careful whether a function takes byte offsets or code-point indices. In general, all position parameters are in byte offsets, not code point indices. This may be surprising, but if you think about, is required for good performance. It also means many functions will work even if they do not contain UTF-8, so you may actually store arbitrary data in the strings.</p><p>For actual text processing, where you want to specify positions with code point indices, you should use <a href="al_ustr_offset.html">al_ustr_offset</a> to find the byte position of a code point.</p></div><div id="utf-8-string-types"><h1><span>UTF-8 string types</span></h1><ul><li><a href="ALLEGRO_USTR.html">ALLEGRO_USTR</a></li><li><a href="ALLEGRO_USTR_INFO.html">ALLEGRO_USTR_INFO</a></li></ul></div><div id="creating-and-destroying-strings"><h1><span>Creating and destroying strings</span></h1><ul><li><a href="al_ustr_new.html">al_ustr_new</a></li><li><a href="al_ustr_new_from_buffer.html">al_ustr_new_from_buffer</a></li><li><a href="al_ustr_newf.html">al_ustr_newf</a></li><li><a href="al_ustr_free.html">al_ustr_free</a></li><li><a href="al_cstr.html">al_cstr</a></li><li><a href="al_ustr_to_buffer.html">al_ustr_to_buffer</a></li><li><a href="al_cstr_dup.html">al_cstr_dup</a></li><li><a href="al_ustr_dup.html">al_ustr_dup</a></li><li><a href="al_ustr_dup_substr.html">al_ustr_dup_substr</a></li></ul></div><div id="predefined-strings"><h1><span>Predefined strings</span></h1><ul><li><a href="al_ustr_empty_string.html">al_ustr_empty_string</a></li></ul></div><div id="creating-strings-by-referencing-other-data"><h1><span>Creating strings by referencing other data</span></h1><ul><li><a href="al_ref_cstr.html">al_ref_cstr</a></li><li><a href="al_ref_buffer.html">al_ref_buffer</a></li><li><a href="al_ref_ustr.html">al_ref_ustr</a></li></ul></div><div id="sizes-and-offsets"><h1><span>Sizes and offsets</span></h1><ul><li><a href="al_ustr_size.html">al_ustr_size</a></li><li><a href="al_ustr_length.html">al_ustr_length</a></li><li><a href="al_ustr_offset.html">al_ustr_offset</a></li><li><a href="al_ustr_next.html">al_ustr_next</a></li><li><a href="al_ustr_prev.html">al_ustr_prev</a></li></ul></div><div id="getting-code-points"><h1><span>Getting code points</span></h1><ul><li><a href="al_ustr_get.html">al_ustr_get</a></li><li><a href="al_ustr_get_next.html">al_ustr_get_next</a></li><li><a href="al_ustr_prev_get.html">al_ustr_prev_get</a></li></ul></div><div id="inserting-into-strings"><h1><span>Inserting into strings</span></h1><ul><li><a href="al_ustr_insert.html">al_ustr_insert</a></li><li><a href="al_ustr_insert_cstr.html">al_ustr_insert_cstr</a></li><li><a href="al_ustr_insert_chr.html">al_ustr_insert_chr</a></li></ul></div><div id="appending-to-strings"><h1><span>Appending to strings</span></h1><ul><li><a href="al_ustr_append.html">al_ustr_append</a></li><li><a href="al_ustr_append_cstr.html">al_ustr_append_cstr</a></li><li><a href="al_ustr_append_chr.html">al_ustr_append_chr</a></li><li><a href="al_ustr_appendf.html">al_ustr_appendf</a></li><li><a href="al_ustr_vappendf.html">al_ustr_vappendf</a></li></ul></div><div id="removing-parts-of-strings"><h1><span>Removing parts of strings</span></h1><ul><li><a href="al_ustr_remove_chr.html">al_ustr_remove_chr</a></li><li><a href="al_ustr_remove_range.html">al_ustr_remove_range</a></li><li><a href="al_ustr_truncate.html">al_ustr_truncate</a></li><li><a href="al_ustr_ltrim_ws.html">al_ustr_ltrim_ws</a></li><li><a href="al_ustr_rtrim_ws.html">al_ustr_rtrim_ws</a></li><li><a href="al_ustr_trim_ws.html">al_ustr_trim_ws</a></li></ul></div><div id="assigning-one-string-to-another"><h1><span>Assigning one string to another</span></h1><ul><li><a href="al_ustr_assign.html">al_ustr_assign</a></li><li><a href="al_ustr_assign_substr.html">al_ustr_assign_substr</a></li><li><a href="al_ustr_assign_cstr.html">al_ustr_assign_cstr</a></li></ul></div><div id="replacing-parts-of-string"><h1><span>Replacing parts of string</span></h1><ul><li><a href="al_ustr_set_chr.html">al_ustr_set_chr</a></li><li><a href="al_ustr_replace_range.html">al_ustr_replace_range</a></li></ul></div><div id="searching"><h1><span>Searching</span></h1><ul><li><a href="al_ustr_find_chr.html">al_ustr_find_chr</a></li><li><a href="al_ustr_rfind_chr.html">al_ustr_rfind_chr</a></li><li><a href="al_ustr_find_set.html">al_ustr_find_set</a></li><li><a href="al_ustr_find_set_cstr.html">al_ustr_find_set_cstr</a></li><li><a href="al_ustr_find_cset.html">al_ustr_find_cset</a></li><li><a href="al_ustr_find_cset_cstr.html">al_ustr_find_cset_cstr</a></li><li><a href="al_ustr_find_str.html">al_ustr_find_str</a></li><li><a href="al_ustr_find_cstr.html">al_ustr_find_cstr</a></li><li><a href="al_ustr_rfind_str.html">al_ustr_rfind_str</a></li><li><a href="al_ustr_rfind_cstr.html">al_ustr_rfind_cstr</a></li><li><a href="al_ustr_find_replace.html">al_ustr_find_replace</a></li><li><a href="al_ustr_find_replace_cstr.html">al_ustr_find_replace_cstr</a></li></ul></div><div id="comparing"><h1><span>Comparing</span></h1><ul><li><a href="al_ustr_equal.html">al_ustr_equal</a></li><li><a href="al_ustr_compare.html">al_ustr_compare</a></li><li><a href="al_ustr_ncompare.html">al_ustr_ncompare</a></li><li><a href="al_ustr_has_prefix.html">al_ustr_has_prefix</a></li><li><a href="al_ustr_has_prefix_cstr.html">al_ustr_has_prefix_cstr</a></li><li><a href="al_ustr_has_suffix.html">al_ustr_has_suffix</a></li><li><a href="al_ustr_has_suffix_cstr.html">al_ustr_has_suffix_cstr</a></li></ul></div><div id="utf-16-conversion"><h1><span>UTF-16 conversion</span></h1><ul><li><a href="al_ustr_new_from_utf16.html">al_ustr_new_from_utf16</a></li><li><a href="al_ustr_size_utf16.html">al_ustr_size_utf16</a></li><li><a href="al_ustr_encode_utf16.html">al_ustr_encode_utf16</a></li></ul></div><div id="low-level-utf-8-routines"><h1><span>Low-level UTF-8 routines</span></h1><ul><li><a href="al_utf8_width.html">al_utf8_width</a></li><li><a href="al_utf8_encode.html">al_utf8_encode</a></li></ul></div><div id="low-level-utf-16-routines"><h1><span>Low-level UTF-16 routines</span></h1><ul><li><a href="al_utf16_width.html">al_utf16_width</a></li><li><a href="al_utf16_encode.html">al_utf16_encode</a></li></ul></div></div>
</body>
<!-- Mirrored from www.allegro.cc/manual/5/utf8.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:21:28 GMT -->
</html>