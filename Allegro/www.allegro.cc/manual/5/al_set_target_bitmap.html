<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:math="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink">

<!-- Mirrored from www.allegro.cc/manual/5/al_set_target_bitmap by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<title>al_set_target_bitmap - Allegro 5 Manual</title>
<link rel="stylesheet" type="text/css" media="screen, projection" href="manual.css" /> 
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/prototype.js"></script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/jquery-1.5.1.min.js"></script>
<style type="text/css">
#examples p.names { font-size: 75%; }

.snippet, .terminal {
	font-size: 13px;
	font-family: monospace;
	line-height: 1.2;
	width: 95%;
	white-space: pre;
	overflow: auto;
}

.snippet code {
	font-family: monospace;
	font-size: 13px;
	line-height: 1.2;
	white-space: normal;
}

div.source-code div.inner, pre.source-code, .terminal.scroll {
	background-color: #fff;
	border-bottom: solid #999 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	border-top: solid #ccc 1px;
	font-family: monospace;
	line-height: 1.2;
	white-space: pre;
	max-height: 400px;
	overflow: auto;
}

span.source-code,
.source-code pre {
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
	white-space: pre;
}

div.mockup div.source-code {
	xwidth: 600px;
}

div.mockup div.source-code.snippet div.inner,
div.mockup div.source-code.snippet div.inner td {
	border: none;
	background-color: transparent !important;
}

div.mockup div.source-code div.inner.fullsize {
	max-height: none;
}

div.mockup div.source-code div.toolbar {
	background-color: #eee;
	border-top: solid #ccc 1px;
	border-left: solid #ccc 1px;
	border-right: solid #999 1px;
	font-family: Tahoma, sans-serif;
	font-size: 11px;
	padding: 4px;
}

div.mockup div.source-code div.toolbar span.name {
	font-weight: bold;
	margin-right: 16px;
}

div.mockup div.source-code div.toolbar span.button {
	border: solid #eee 1px;
	cursor: pointer;
	padding: 1px 4px;
	margin-right: 2px;
}

div.mockup div.source-code div.toolbar span.button.enabled {
	background-color: #ddd;
	border-top: solid #fff 1px;
	border-left: solid #fff 1px;
	border-right: solid #999 1px;
	border-bottom: solid #999 1px;
}

div.mockup div.source-code div.highlight {
	background-color: #ffa !important;
}

div.mockup div.source-code span.number {
	background-color: #eee !important;
	border-right: #999 solid 1px !important;
	text-align: right;
	padding: 0 0.5em;
	margin: 0 1em 0 0;
	width: 40px;
}

div.mockup div.source-code div.highlight span.number {
	background-color: #ccc !important;
	font-weight: bold;
}

div.mockup div.source-code div.inner {
	margin: 0;
	padding: 0;
	font-family: monospace;
	font-size: 12px;
	line-height: 1.2;
}

</style>
<script type="text/javascript">
var $j = $.noConflict();
var codecache = {};
$j(function()
{
  $j("#examples a").click(function()
  {
    var ex = $j(this).html();
    if (codecache[ex])
      show_code(codecache[ex]);
    else
      $j.getJSON('/dhtml/get-example.rpc/' + ex, function(json)
      {
        codecache[ex] = json;
        show_code(json);
      });
  });
});

function show_code(code)
{
  $j("#example-code").html($j('<input type="button" value="Hide" style="margin-bottom: 8px;" />').click(function()
  {
    $j(this).closest('div').hide();
  })).append(code).show();
  attachGlobalEvents($("examples"));
};
</script>
<script type="text/javascript" src="http://djungxnpq2nug.cloudfront.net/js/general.js"></script>

</head>
<body>
<div id="sidebar">
<p class="site"><a href="https://www.allegro.cc/">allegro.cc</a></p>
<h1><a href="index.html">Manual</a></h1>
<h2><a href="graphics.html">Graphics routines</a></h2>
		<ul><li><span>Colors</span><ul><li><a href="allegro_color-2.html">ALLEGRO_COLOR</a></li><li><a href="al_map_rgb.html">al_map_rgb</a></li><li><a href="al_map_rgb_f.html">al_map_rgb_f</a></li><li><a href="al_map_rgba.html">al_map_rgba</a></li><li><a href="al_map_rgba_f.html">al_map_rgba_f</a></li><li><a href="al_unmap_rgb.html">al_unmap_rgb</a></li><li><a href="al_unmap_rgb_f.html">al_unmap_rgb_f</a></li><li><a href="al_unmap_rgba.html">al_unmap_rgba</a></li><li><a href="al_unmap_rgba_f.html">al_unmap_rgba_f</a></li></ul></li><li><span>Locking and pixel formats</span><ul><li><a href="https://www.allegro.cc/manual/5/allegro_locked_region">ALLEGRO_LOCKED_REGION</a></li><li><a href="https://www.allegro.cc/manual/5/allegro_pixel_format">ALLEGRO_PIXEL_FORMAT</a></li><li><a href="al_get_pixel_size.html">al_get_pixel_size</a></li><li><a href="al_get_pixel_format_bits.html">al_get_pixel_format_bits</a></li><li><a href="al_lock_bitmap.html">al_lock_bitmap</a></li><li><a href="al_lock_bitmap_region.html">al_lock_bitmap_region</a></li><li><a href="al_unlock_bitmap.html">al_unlock_bitmap</a></li></ul></li><li><span>Bitmap creation</span><ul><li><a href="allegro_bitmap-2.html">ALLEGRO_BITMAP</a></li><li><a href="al_create_bitmap.html">al_create_bitmap</a></li><li><a href="al_create_sub_bitmap.html">al_create_sub_bitmap</a></li><li><a href="al_clone_bitmap.html">al_clone_bitmap</a></li><li><a href="al_destroy_bitmap.html">al_destroy_bitmap</a></li><li><a href="al_get_new_bitmap_flags.html">al_get_new_bitmap_flags</a></li><li><a href="al_get_new_bitmap_format.html">al_get_new_bitmap_format</a></li><li><a href="al_set_new_bitmap_flags.html">al_set_new_bitmap_flags</a></li><li><a href="al_add_new_bitmap_flag.html">al_add_new_bitmap_flag</a></li><li><a href="al_set_new_bitmap_format.html">al_set_new_bitmap_format</a></li></ul></li><li><span>Bitmap properties</span><ul><li><a href="al_get_bitmap_flags.html">al_get_bitmap_flags</a></li><li><a href="al_get_bitmap_format.html">al_get_bitmap_format</a></li><li><a href="al_get_bitmap_height.html">al_get_bitmap_height</a></li><li><a href="al_get_bitmap_width.html">al_get_bitmap_width</a></li><li><a href="al_get_pixel.html">al_get_pixel</a></li><li><a href="al_is_bitmap_locked.html">al_is_bitmap_locked</a></li><li><a href="al_is_compatible_bitmap.html">al_is_compatible_bitmap</a></li><li><a href="al_is_sub_bitmap.html">al_is_sub_bitmap</a></li></ul></li><li><span>Drawing operations</span><ul><li><a href="al_clear_to_color.html">al_clear_to_color</a></li><li><a href="al_draw_bitmap.html">al_draw_bitmap</a></li><li><a href="al_draw_tinted_bitmap.html">al_draw_tinted_bitmap</a></li><li><a href="al_draw_bitmap_region.html">al_draw_bitmap_region</a></li><li><a href="al_draw_tinted_bitmap_region.html">al_draw_tinted_bitmap_region</a></li><li><a href="al_draw_pixel.html">al_draw_pixel</a></li><li><a href="al_draw_rotated_bitmap.html">al_draw_rotated_bitmap</a></li><li><a href="al_draw_tinted_rotated_bitmap.html">al_draw_tinted_rotated_bitmap</a></li><li><a href="al_draw_scaled_rotated_bitmap.html">al_draw_scaled_rotated_bitmap</a></li><li><a href="al_draw_tinted_scaled_rotated_bitmap.html">al_draw_tinted_scaled_rotated_bitmap</a></li><li><a href="al_draw_scaled_bitmap.html">al_draw_scaled_bitmap</a></li><li><a href="al_draw_tinted_scaled_bitmap.html">al_draw_tinted_scaled_bitmap</a></li><li><a href="al_get_target_bitmap.html">al_get_target_bitmap</a></li><li><a href="al_put_pixel.html">al_put_pixel</a></li><li><a href="al_put_blended_pixel.html">al_put_blended_pixel</a></li><li><a href="al_set_target_bitmap.html">al_set_target_bitmap</a></li><li><a href="al_set_target_backbuffer.html">al_set_target_backbuffer</a></li><li><a href="al_get_current_display.html">al_get_current_display</a></li></ul></li><li><span>Blending modes</span><ul><li><a href="al_get_blender.html">al_get_blender</a></li><li><a href="al_get_separate_blender.html">al_get_separate_blender</a></li><li><a href="al_set_blender.html">al_set_blender</a></li><li><a href="al_set_separate_blender.html">al_set_separate_blender</a></li></ul></li><li><span>Clipping</span><ul><li><a href="al_get_clipping_rectangle.html">al_get_clipping_rectangle</a></li><li><a href="al_set_clipping_rectangle.html">al_set_clipping_rectangle</a></li></ul></li><li><span>Graphics utility functions</span><ul><li><a href="al_convert_mask_to_alpha.html">al_convert_mask_to_alpha</a></li></ul></li><li><span>Deferred drawing</span><ul><li><a href="al_hold_bitmap_drawing.html">al_hold_bitmap_drawing</a></li><li><a href="al_is_bitmap_drawing_held.html">al_is_bitmap_drawing_held</a></li></ul></li><li><span>Image I/O</span><ul><li><a href="al_register_bitmap_loader.html">al_register_bitmap_loader</a></li><li><a href="al_register_bitmap_saver.html">al_register_bitmap_saver</a></li><li><a href="al_register_bitmap_loader_f.html">al_register_bitmap_loader_f</a></li><li><a href="al_register_bitmap_saver_f.html">al_register_bitmap_saver_f</a></li><li><a href="al_load_bitmap.html">al_load_bitmap</a></li><li><a href="al_load_bitmap_f.html">al_load_bitmap_f</a></li><li><a href="al_save_bitmap.html">al_save_bitmap</a></li><li><a href="al_save_bitmap_f.html">al_save_bitmap_f</a></li></ul></li></ul></div>
<div id="content">
<h1 class="title">al_set_target_bitmap</h1>
<code><pre><span class="k1">void</span> <a href="https://www.allegro.cc/manual/al_set_target_bitmap"><span class="a">al_set_target_bitmap</span></a><span class="k2">(</span><a href="https://www.allegro.cc/manual/ALLEGRO_BITMAP"><span class="a">ALLEGRO_BITMAP</span></a> <span class="k3">*</span>bitmap<span class="k2">)</span></pre></code>
<small>Introduced in <b>5.0.0</b></small>


<p>Select the bitmap to which all subsequent drawing operations in the calling thread will draw. Select the backbuffer (see <a href="al_get_backbuffer.html">al_get_backbuffer</a>) to return to drawing to the screen normally.</p><p>Each video bitmap is tied to a display. When a video bitmap is set to as the target bitmap, the display that the bitmap belongs to is automatically made "current" for the calling thread (if it is not current already). Then drawing other bitmaps which are tied to the same display can be hardware accelerated.</p><p>A single display cannot be current for multiple threads simultaneously. If you need to release a display, so it is not current for the calling thread, call <code>al_set_target_bitmap(NULL);</code></p><p>Setting a memory bitmap as the target bitmap will not change which display is current for the calling thread.</p><p>OpenGL note:</p><p>Framebuffer objects (FBOs) allow OpenGL to directly draw to a bitmap, which is very fast. When using an OpenGL display, if all of the following conditions are met an FBO will be created for use with the bitmap:</p><ul><li>The GL_EXT_framebuffer_object OpenGL extension is available.</li><li>The bitmap is not a memory bitmap.</li><li>The bitmap is not currently locked.</li></ul><p>In Allegro 5.0.0, you had to be careful as an FBO would be kept around until the bitmap is destroyed or you explicitly called <a href="al_remove_opengl_fbo.html">al_remove_opengl_fbo</a> on the bitmap, wasting resources. In newer versions, FBOs will be freed automatically when the bitmap is no longer the target bitmap, <em>unless</em> you have called <a href="al_get_opengl_fbo.html">al_get_opengl_fbo</a> to retrieve the FBO id.</p><p>In the following example, no FBO will be created:</p><pre><code><a href="http://www.delorie.com/djgpp/doc/libc/libc_539.html" target="_blank">lock</a> <span class="k3">=</span> <a href="https://www.allegro.cc/manual/al_lock_bitmap"><span class="a">al_lock_bitmap</span></a><span class="k2">(</span>bitmap<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_set_target_bitmap"><span class="a">al_set_target_bitmap</span></a><span class="k2">(</span>bitmap<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_put_pixel"><span class="a">al_put_pixel</span></a><span class="k2">(</span>x, y, color<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_unlock_bitmap"><span class="a">al_unlock_bitmap</span></a><span class="k2">(</span>bitmap<span class="k2">)</span><span class="k2">;</span></code></pre><p>The above allows using <a href="al_put_pixel.html">al_put_pixel</a> on a locked bitmap without creating an FBO.</p><p>In this example an FBO is created however:</p><pre><code><a href="https://www.allegro.cc/manual/al_set_target_bitmap"><span class="a">al_set_target_bitmap</span></a><span class="k2">(</span>bitmap<span class="k2">)</span><span class="k2">;</span>
<a href="https://www.allegro.cc/manual/al_draw_line"><span class="a">al_draw_line</span></a><span class="k2">(</span>x1, y1, x2, y2, color, <span class="n">0</span><span class="k2">)</span><span class="k2">;</span></code></pre><p>An OpenGL command will be used to directly draw the line into the bitmap's associated texture.</p><p>See also: <a href="al_get_target_bitmap.html">al_get_target_bitmap</a>, <a href="al_set_target_backbuffer.html">al_set_target_backbuffer</a></p>
<div id="examples">
<p class="names">Examples: <a href="#" onclick="return false;">ex_bitmap_target</a>, <a href="#" onclick="return false;">ex_blend</a>, <a href="#" onclick="return false;">ex_blend2</a>, <a href="#" onclick="return false;">ex_blend_bench</a>, <a href="#" onclick="return false;">ex_blend_test</a>, <a href="#" onclick="return false;">ex_blit</a>, <a href="#" onclick="return false;">ex_clip</a>, <a href="#" onclick="return false;">ex_draw</a>, <a href="#" onclick="return false;">ex_draw_bitmap</a>, <a href="#" onclick="return false;">ex_gldepth</a>, <a href="#" onclick="return false;">ex_icon</a>, <a href="#" onclick="return false;">ex_lines</a>, <a href="#" onclick="return false;">ex_lockbitmap</a>, <a href="#" onclick="return false;">ex_logo</a>, <a href="#" onclick="return false;">ex_mixer_pp</a>, <a href="#" onclick="return false;">ex_mouse_cursor</a>, <a href="#" onclick="return false;">ex_multiwin</a>, <a href="#" onclick="return false;">ex_nodisplay</a>, <a href="#" onclick="return false;">ex_opengl_pixel_shader</a>, <a href="#" onclick="return false;">ex_pixelformat</a>, <a href="#" onclick="return false;">ex_prim</a>, <a href="#" onclick="return false;">ex_rotate</a>, <a href="#" onclick="return false;">ex_scale</a>, <a href="#" onclick="return false;">ex_subbitmap</a>, <a href="#" onclick="return false;">ex_transform</a></p>

<div id="example-code" style="display: none">
</div>

</div>

<hr />

<p><i>Most helpful discussions:</i></p>


<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/610182">draw_sprite in allegro 5</a>
		(2)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/615154">(X)ubuntu, Nvidia Drivers, VSYNC and overheating CPU/GPU</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/614227">Problem toggling between Window and Fullscreen</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/614224">[A5] Copying a bitmap from a transformed screen</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/613829">Allegro put_pixel</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/607485">Crazy &amp;quot;random&amp;quot; slowdown</a>
		(1)			</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618672">You&amp;#39;re such a disappointment.</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618658">Why is this throwing an error???</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618645">using a photo to floofill a bitmap</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618400">help: memory bitmap background image causing artifacts</a>
					</li>
</ul>

<p><i>Other recent discussions:</i></p>
<ul>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618397">Allegro color bitmap</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618372">Same code - slow on Windows, fast on Linux - timer fires too slow?</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618223">Allegro 5 performance</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618161">ALLEGRO_LOCKED_REGION confusion</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618088">al_set_target_bitmap on windows performace</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618083">&amp;#39;wrap&amp;#39; a texture (in the shader I&amp;#39;d think)</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618040">How to show the draw of subbitmap in screen</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/618027">Stepping Into the Third Dimension</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617991">To get shaders going.</a>
					</li>
	<li>
		<a href="https://www.allegro.cc/forums/thread/617932">still al_draw_text() problem</a>
					</li>
</ul>



</div>



</body>

<!-- Mirrored from www.allegro.cc/manual/5/al_set_target_bitmap by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 26 Jun 2022 21:28:15 GMT -->
</html>
